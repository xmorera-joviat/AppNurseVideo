Index: app/src/main/java/com/example/nurseapp/Registres_Acces/Registrarse.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.nurseapp.Registres_Acces;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.view.View;\r\nimport android.widget.Button;\r\nimport android.widget.EditText;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.NonNull;\r\n\r\nimport com.example.nurseapp.MainActivity;\r\nimport com.example.nurseapp.R;\r\nimport com.example.nurseapp.TractamentGenericToolBar.TractamentToolBar;\r\nimport com.google.android.gms.tasks.OnCompleteListener;\r\nimport com.google.android.gms.tasks.Task;\r\nimport com.google.firebase.auth.AuthResult;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\n\r\n/**\r\n * Classe que controla l'accés d'usuaris per registrar-se a Firebase.\r\n */\r\npublic class Registrarse extends TractamentToolBar {\r\n\r\n    // Inicialització de les variables :\r\n    private FirebaseAuth mAuth;\r\n    private FirebaseAuth.AuthStateListener mAuthStateListener;\r\n    private EditText editTextEmail;\r\n    private EditText editTextContrassenya;\r\n    private EditText editTextComprovacio;\r\n    private Button buttonAcces;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_registrar);\r\n\r\n        // Executem el mètode setUpToolBar\r\n        setUpToolBar();\r\n\r\n        // Executem el mètode customTitileTool, passant com a paràmetre el nom que volem indicar.\r\n        customTitileToolBar(getResources().getString(R.string.register));\r\n\r\n        // Vinculem les variables amb els corresponents objectes de l'apartat gràfic.\r\n        editTextEmail = findViewById(R.id.idEmail);\r\n        editTextContrassenya = findViewById(R.id.idContrassenya);\r\n        editTextContrassenya = findViewById(R.id.idComprovacio);\r\n        buttonAcces = findViewById(R.id.idButtonAcces);\r\n\r\n        // Obtenim l'instància de FirebaseAuth.\r\n        mAuth = FirebaseAuth.getInstance();\r\n\r\n        // Botó onClick per tal d'executar el mètode ComprovarLogin.\r\n        buttonAcces.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                ComprovarLogin();\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Mètode amb el que comprovem si el login a la base de dades Firebase s'ha realitzat correctament.\r\n     */\r\n    public void ComprovarLogin() {\r\n        String email = editTextEmail.getText().toString();\r\n        String contrassenya = editTextContrassenya.getText().toString();\r\n\r\n        try {\r\n            mAuth.signInWithEmailAndPassword(email, contrassenya)\r\n                    .addOnCompleteListener(this, new OnCompleteListener<AuthResult>() {\r\n                        @Override\r\n                        public void onComplete(@NonNull Task<AuthResult> task) {\r\n                            if (task.isSuccessful()) {\r\n                                FirebaseUser user = mAuth.getCurrentUser();\r\n\r\n                                Intent i = new Intent(getApplicationContext(), MainActivity.class);\r\n                                startActivity(i);\r\n\r\n                                finish();\r\n                            }\r\n                            else {\r\n                                Toast.makeText(getApplicationContext(), \"Revisa les dades!\", Toast.LENGTH_LONG).show();\r\n                            }\r\n                        }\r\n                    });\r\n        }\r\n        catch (IllegalArgumentException | NullPointerException d) {\r\n            Toast.makeText(getApplicationContext(), \"Revisa les dades!\", Toast.LENGTH_LONG).show();\r\n        }\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/nurseapp/Registres_Acces/Registrarse.java	(revision 46acc5974176b18e8275867addc20487252a9d1c)
+++ app/src/main/java/com/example/nurseapp/Registres_Acces/Registrarse.java	(date 1623009221249)
@@ -45,49 +45,55 @@
         // Vinculem les variables amb els corresponents objectes de l'apartat gràfic.
         editTextEmail = findViewById(R.id.idEmail);
         editTextContrassenya = findViewById(R.id.idContrassenya);
-        editTextContrassenya = findViewById(R.id.idComprovacio);
+        editTextComprovacio = findViewById(R.id.idComprovacio);
         buttonAcces = findViewById(R.id.idButtonAcces);
 
         // Obtenim l'instància de FirebaseAuth.
         mAuth = FirebaseAuth.getInstance();
 
-        // Botó onClick per tal d'executar el mètode ComprovarLogin.
+        // Botó onClick per tal d'executar el mètode ComprovarRegistre.
         buttonAcces.setOnClickListener(new View.OnClickListener() {
             @Override
             public void onClick(View v) {
-                ComprovarLogin();
+                ComprovarRegistre();
             }
         });
     }
 
     /**
-     * Mètode amb el que comprovem si el login a la base de dades Firebase s'ha realitzat correctament.
+     * Mètode amb el que comprovem si el registre a la base de dades Firebase s'ha realitzat correctament.
      */
-    public void ComprovarLogin() {
+    public void ComprovarRegistre() {
         String email = editTextEmail.getText().toString();
         String contrassenya = editTextContrassenya.getText().toString();
+        String comprovacio = editTextComprovacio.getText().toString();
 
-        try {
-            mAuth.signInWithEmailAndPassword(email, contrassenya)
-                    .addOnCompleteListener(this, new OnCompleteListener<AuthResult>() {
-                        @Override
-                        public void onComplete(@NonNull Task<AuthResult> task) {
-                            if (task.isSuccessful()) {
-                                FirebaseUser user = mAuth.getCurrentUser();
+        if (contrassenya.equals(comprovacio)) {
+            try {
+                mAuth.createUserWithEmailAndPassword(email, contrassenya)
+                        .addOnCompleteListener(this, new OnCompleteListener<AuthResult>() {
+                            @Override
+                            public void onComplete(@NonNull Task<AuthResult> task) {
+                                if (task.isSuccessful()) {
+                                    FirebaseUser user = mAuth.getCurrentUser();
 
-                                Intent i = new Intent(getApplicationContext(), MainActivity.class);
-                                startActivity(i);
+                                    Intent i = new Intent(getApplicationContext(), MainActivity.class);
+                                    startActivity(i);
 
-                                finish();
-                            }
-                            else {
-                                Toast.makeText(getApplicationContext(), "Revisa les dades!", Toast.LENGTH_LONG).show();
-                            }
-                        }
-                    });
-        }
-        catch (IllegalArgumentException | NullPointerException d) {
-            Toast.makeText(getApplicationContext(), "Revisa les dades!", Toast.LENGTH_LONG).show();
+                                    finish();
+                                }
+                                else {
+                                    Toast.makeText(getApplicationContext(), "Compte ja existent!", Toast.LENGTH_LONG).show();
+                                }
+                            }
+                        });
+            }
+            catch (IllegalArgumentException | NullPointerException d) {
+                Toast.makeText(getApplicationContext(), "Dades incorrectes!", Toast.LENGTH_LONG).show();
+            }
+        }
+        else {
+            Toast.makeText(getApplicationContext(), "La contrasenya no coincideix!", Toast.LENGTH_LONG).show();
         }
     }
 }
