<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Visualitzar Vídeos</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">

  	<style>
  		div.centrar {
  			color: #FFFFFF;
  			text-align: center;
  		}
  		body {
  		background-color: #4D4D4D;
  		color: #FFFFFF;
  		}
  	</style>
  </head>
  
  <body>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.15.5/firebase-app.js"></script>
  	<script src="https://www.gstatic.com/firebasejs/7.15.5/firebase-auth.js"></script>
  	<script src="https://www.gstatic.com/firebasejs/7.15.5/firebase-database.js"></script> 
  	<script src="https://www.gstatic.com/firebasejs/7.15.5/firebase-analytics.js"></script>
  	<script>
    // Your web app's Firebase configuration
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
  	  var firebaseConfig = {
  	    apiKey: "AIzaSyCe7NPMFUTamWIH9fdk0xjk9pj3KllxkrI",
  	    authDomain: "nurseapp-b4a04.firebaseapp.com",
  	    databaseURL: "https://nurseapp-b4a04.firebaseio.com",
  	    projectId: "nurseapp-b4a04",
  	    storageBucket: "nurseapp-b4a04.appspot.com",
  	    messagingSenderId: "243441860725",
  	    appId: "1:243441860725:web:47745a69e80569c627b83c",
  	    measurementId: "G-HL8B5LYF0W"
  	  };
  	  // Initialize Firebase
  	  firebase.initializeApp(firebaseConfig);
 
  	</script>
   
  	<div id="txtHint"></div>
  	<br />
  	<div class="centrar">
  		<br />
  		<br />
  		<button  class="btn btn-outline-success" onclick="window.location.href = 'inserir.php'" >Inserir Nou Vídeo</button>
  	</div>
 	<div>
 	
 		<script>
 		//obtenir les dades de la URL en format JSON
	 		var getJSON = function(url) {
	 			  return new Promise(function(resolve, reject) {
	 			    var xhr = new XMLHttpRequest();
	 			    xhr.open('get', url, true);
	 			    xhr.responseType = 'json';
	 			    xhr.onload = function() {
	 			      var status = xhr.status;
	 			     if (status == 200) {
	 			        resolve(xhr.response);
	 			      } else {
	 			        reject(status);
	 			      }
	 			    };
	 			    xhr.send();
	 			  });
	 			};
	 		
	 		getJSON("https://nurseapp-b4a04.firebaseio.com/LlistatVideosCa.json").then(function(data) {
	 		    var jsondata = data.result; //store result in variable
					
	 		    
	 		    // Your code here....///
	 		    ///  Now you can access the json's data using jsondata variable:  //
	 		    // jsondata[0].year will have the value of year key, jsondata[0].month will have month key and so on.... //
	
	 		}, function(status) { //error detection....
	 		  alert('Something went wrong.');
	 		});
 		
 		</script>
 		
 	</div>
  	<div class="centrar">
  		<br />
  		<br />
  		<button  class="btn btn-primary btn-lg" onclick="signOut()" >Sortir</button> 
  		<br />
  		<br />
  	</div>
  	<script>
  	function esborrar(id){
  		if(confirm('Estas segur que vols esborrar el vídeo?')){
  			firebase.database().ref('LlistatVideosCa/'+id).remove();
  			firebase.database().ref('LlistatVideosEn/'+id).remove();
  			firebase.database().ref('LlistatVideosEs/'+id).remove()
  				.then(result => window.location.reload(result));
  		}
  		
  	}
  	</script>
  
  	<script>
  	function editar(id){
  		window.location.href = "editar.php?id="+id;  	
  	}
  	</script>
  	<script>
  	function amagar(amagar,id){
  		if(amagar == 0){
  			firebase.database().ref('LlistatVideosCa/'+id).update({
  						'mostrar': 0}).then(result => window.location.reload(result));
  		}
  		else if(amagar == 1){
  			firebase.database().ref('LlistatVideosCa/'+id).update({
  						'mostrar': 1}).then(result => window.location.reload(result));
  			}
  		}
  		</script>
  		<script>
  			function signOut(){
  				firebase.auth().signOut();
  				window.location.href = "index.html";
  			}
  	</script>
  </body>
</html>